(drl) D:\MyCode\ChargingGame>python test_integration.py

############################################################
# EVCSChargingGameEnv 集成测试
# 测试 uxsimpp_extended 与博弈环境的集成
############################################################
============================================================
测试1：EVCSChargingGameEnv 初始化
============================================================
  智能体数量: 4
  时段数量: 8
  智能体列表: ['5', '12', '14', '18']
[PASS] 环境初始化成功

============================================================
测试2：环境重置 (reset)
============================================================
  观测数量: 4
  5: last_round_all_prices shape = (4, 8), own_charging_flow shape = (8,)
  12: last_round_all_prices shape = (4, 8), own_charging_flow shape = (8,)
  14: last_round_all_prices shape = (4, 8), own_charging_flow shape = (8,)
  18: last_round_all_prices shape = (4, 8), own_charging_flow shape = (8,)
[PASS] 环境重置成功

============================================================
测试3：执行一步博弈 (step)
============================================================
  动作示例 (5): [0.44981605 0.68028575 0.5927976 ]...
  奖励: {'5': np.float64(521.8019783496857), '12': np.float64(0.0), '14': np.float64(516.8482065200806), '18': np.float64(2711.655408143997)}
  终止状态: {'5': False, '12': False, '14': False, '18': False}
[PASS] 执行一步博弈成功

============================================================
测试4：执行多步博弈 (3步)
============================================================
  Step 1: 总奖励 = 3750.31, 收敛 = False
  Step 2: 总奖励 = 4119.12, 收敛 = False
  Step 3: 总奖励 = 4100.08, 收敛 = False
[PASS] 多步博弈执行成功

============================================================
测试5：车辆 attribute 功能
============================================================
  车辆 1-2-3365.0: attribute = {'charging_car': False}
  车辆 1-3-3365.0: attribute = {'charging_car': False}
  车辆 1-4-665.0: attribute = {'charging_car': False}
  检查车辆数: 6601
  有attribute的车辆数: 6601
[PASS] 车辆 attribute 功能正常

============================================================
集成测试结果汇总
============================================================
  环境初始化: [PASS]
  环境重置: [PASS]
  单步博弈: [PASS]
  多步博弈: [PASS]
  车辆attribute: [PASS]
------------------------------------------------------------
通过: 5, 失败: 0
============================================================

(drl) D:\MyCode\ChargingGame>